var s=class{constructor(e=1){this.queue=[],this.limit=e,this.notEmptyResolves=[],this.notFullResolves=[]}push(e){return this.notEmptyResolves.length?(this.notEmptyResolves.shift()(e),Promise.resolve()):this.queue.length===this.limit?new Promise(t=>{this.notFullResolves.push(t)}).then(()=>{this.queue.push(e)}):(this.queue.push(e),Promise.resolve())}pull(){if(this.queue.length===0)return new Promise(e=>{this.notEmptyResolves.push(e)});{let e=this.queue.shift();return this.notFullResolves.length&&this.notFullResolves.shift()(),Promise.resolve(e)}}get length(){return this.queue.length}};export{s as LimitedBlockingQueue};
